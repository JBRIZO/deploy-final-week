"use strict";(self.webpackChunkmoviedb=self.webpackChunkmoviedb||[]).push([[847],{8847:(z,S,o)=>{o.r(S),o.d(S,{SearchModule:()=>P});var u=o(6895),f=o(7799),c=o(4006),h=o(8838),p=o(9653);const m=e=>e.search,C=(0,p.P1)(m,e=>e.loading),F=(0,p.P1)(m,e=>e.results),A=(0,p.P1)(m,e=>e.meta);var t=o(4650),M=o(8515),Z=o(7296),y=o(1572);function T(e,s){1&e&&(t.TgZ(0,"h1",10),t._uU(1," No Search Results Found "),t.qZA())}function U(e,s){if(1&e&&t._UZ(0,"app-card",11),2&e){const r=s.$implicit;t.Q6J("id",r.id)("title",r.title)("released",r.release_date)("voteAvg",10*r.vote_average)("voteCount",r.vote_count)("popularity",r.popularity)("imageUrl",r.poster_path?r.poster_path:"")}}function b(e,s){1&e&&(t.TgZ(0,"div",12),t._UZ(1,"mat-spinner"),t.qZA())}const J=[{path:"",component:(()=>{class e{constructor(r,a,n){this.route=r,this.store=a,this.router=n,this.searchForm=new c.cw({search:new c.NI("")})}ngOnInit(){this.subscription=this.store.select(A).subscribe(r=>{this.page=r.page,this.totalPages=r.total_pages,this.totalResults=r.total_results}),this.loading$=this.store.select(C),this.movies$=this.store.select(F),this.route.queryParamMap.subscribe(r=>{const a=r.get("search");a&&(this.store.dispatch((0,h.Dv)()),this.searchQuery=a,this.searchForm.setValue({search:a}),this.store.dispatch((0,h.U1)({payload:{page:1,query:a}})))})}handleSubmit(){this.router.navigate(["/search"],{queryParams:{search:this.searchForm.value.search}})}onScroll(){this.page+1<=this.totalPages&&this.store.dispatch((0,h.U1)({payload:{page:++this.page,query:this.searchQuery}}))}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(f.gz),t.Y36(p.yh),t.Y36(f.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-search-main"]],decls:16,vars:14,consts:[[1,"search","max-w-[82rem]","m-auto"],[1,"w-[80vw]","pt-10","relative","mx-auto"],[1,"specific__input-container",3,"formGroup","ngSubmit"],["formControlName","search","placeholder","Search for a movie",1,"discover__input","p-3","rounded-full","w-full","outline-none","text-gray-500","pr-[6.5rem]","border","border-primary"],["type","submit",1,"discover__search","bg-gradient-to-r","from-gradientGreen","to-gradientBlue","absolute","py-[0.85rem]","px-8","bottom-0","right-0","rounded-full","font-bold","text-white","hover:text-primary"],[1,"text-center","font-bold","text-3xl","py-6"],["class","text-center font-bold text-3xl py-10",4,"ngIf"],["infinite-scroll","",1,"search__container","text-primary","flex","flex-wrap","justify-center","gap-4","overflow-y-auto","pb-10",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[3,"id","title","released","voteAvg","voteCount","popularity","imageUrl",4,"ngFor","ngForOf"],["class","h-[400px] w-[150px] flex flex-col items-center justify-center",4,"ngIf"],[1,"text-center","font-bold","text-3xl","py-10"],[3,"id","title","released","voteAvg","voteCount","popularity","imageUrl"],[1,"h-[400px]","w-[150px]","flex","flex-col","items-center","justify-center"]],template:function(r,a){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return a.handleSubmit()}),t._UZ(3,"input",3),t.TgZ(4,"button",4),t._uU(5," Search "),t.qZA()()(),t.TgZ(6,"h1",5),t._uU(7,"Search Results"),t.qZA(),t.YNc(8,T,2,0,"h1",6),t.ALo(9,"async"),t.ALo(10,"async"),t.TgZ(11,"div",7),t.NdJ("scrolled",function(){return a.onScroll()}),t.YNc(12,U,1,7,"app-card",8),t.ALo(13,"async"),t.YNc(14,b,2,0,"div",9),t.ALo(15,"async"),t.qZA()()),2&r){let n;t.xp6(2),t.Q6J("formGroup",a.searchForm),t.xp6(6),t.Q6J("ngIf",0===(null==(n=t.lcZ(9,6,a.movies$))?null:n.length)&&!t.lcZ(10,8,a.loading$)),t.xp6(3),t.Q6J("infiniteScrollDistance",0)("infiniteScrollThrottle",1e3),t.xp6(1),t.Q6J("ngForOf",t.lcZ(13,10,a.movies$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,12,a.loading$))}},dependencies:[M.A,Z.Ry,y.Ou,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,u.sg,u.O5,u.Ov]}),e})()}];let $=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(J),f.Bz]}),e})();var R=o(401),i=o(8776),x=o(8475),d=o(3900),g=o(9646),G=o(262),L=o(7409),Q=o(529);let I=(()=>{class e{constructor(r){this.http=r,this.baseUrl="https://api.themoviedb.org/3/search/movie?"}getSearch(r,a){return this.http.get(this.baseUrl+`page=${a}&include_adult=false&query=${r}`)}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(Q.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var N=o(1059);let Y=(()=>{class e{constructor(r,a,n){this.actions$=r,this.searchHttp=a,this.snackBar=n,this.searchSuccess=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(x.I.SEARCH_SUCCESS),(0,d.w)(l=>(0,g.of)((0,L.X)({payload:l.payload.results}))))),this.searchAction=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(x.I.SEARCH_START),(0,d.w)(l=>this.searchHttp.getSearch(l.payload.query,l.payload.page).pipe((0,d.w)(v=>(0,g.of)((0,h.Km)({payload:v}))),(0,G.K)(v=>(this.snackBar.openSnackBar(v.error.status_message,!0),(0,g.of)((0,h.zG)())))))))}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(i.eX),t.LFG(I),t.LFG(N.o))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var B=o(6098);let P=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[B.m,y.Cq,c.UX,u.ez,$,p.Aw.forFeature("search",R.f),i.sQ.forFeature([Y])]}),e})()}}]);